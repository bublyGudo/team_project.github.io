<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Fang Wang" />

<meta name="date" content="2024-12-06" />

<title>project_report_Fang</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="team.html">Team</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Results
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="store_density_and_household_income.html">Store Density vs Household Income</a>
    </li>
    <li>
      <a href="store_overweight_regression.html">Store Density vs Overweight Percentage</a>
    </li>
    <li>
      <a href="pendemic_impact_on_stores.html">Pendemic Impact On Stores</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Walkability
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://bublygudo.shinyapps.io/walkable/">ShinyApp: Walkability</a>
    </li>
    <li>
      <a href="walkability_summary.html">Walkability Summary</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data Sources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="original_datasets.html">Original Datasets</a>
    </li>
    <li>
      <a href="data_cleaning.html">Data Cleaning</a>
    </li>
  </ul>
</li>
<li>
  <a href="project_report.html">Project Report</a>
</li>
<li>
  <a href="mailto:fw2394@cumc.columbia.edu, cm3341@cumc.columbia.edu, tc3326@cumc.columbia.edu, scs2267@cumc.columbia.edu, zw2975@cumc.columbia.edu">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/bublyGudo/team_project.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">project_report_Fang</h1>
<h4 class="author">Fang Wang</h4>
<h4 class="date">2024-12-06</h4>

</div>


<div id="data-source-cleaning-source-cleaning" class="section level1">
<h1>Data: Source cleaning (Source, cleaning)</h1>
<p><em>1. map in landing page: The data cleaning process involved
standardizing column names using janitor::clean_names() across all
datasets, renaming key columns (e.g., year_awarded → year,
farmers_market → store_name, address → store_address), and selecting
relevant variables (store_name, borough, year, store_address, latitude,
longitude). Duplicate entries based on latitude and longitude were
removed. Specific corrections included fixing borough names (e.g., “New
York” → “Manhattan”, “Queen” → “Queens”), and adding a type column to
categorize establishments as “healthy store,” “farmer market,” or
“retail store”. The cleaned datasets were combined into a single dataset
and saved as stores_markets_retails.csv.</em></p>
<p><em>2. walkability tool: To prepare the data for mapping healthy
stores, farmer markets and retail stores within walking distance (400
meters) of subway stations, rows with missing latitude or longitude were
removed from both the Stores and Subway datasets. Both datasets were
then converted into simple feature (sf) objects using st_as_sf() with
latitude and longitude as coordinates. The coordinate reference system
(CRS) was set to EPSG:4326 (WGS84), enabling accurate geospatial
analysis and visualization.</em></p>
<p><em>3. assocaiton beetween number of stores and overweight
percentages: To explore the association between healthy stores/farmers
markets and overweight percentages, the Healthy Stores and Farmers
Market datasets were cleaned by standardizing column names, renaming key
variables, removing duplicates, and selecting relevant columns. These
datasets were then combined into a unified dataset,
stores_farmer_market. Overweight data was similarly cleaned by splitting
the Percent column into separate components, converting percentages to
numeric, and renaming columns for consistency. The combined dataset was
grouped by borough and year to calculate the total number of healthy
stores and farmers markets. Finally, these counts were merged with the
cleaned overweight data using a full join, enabling borough-level
analysis of trends and associations over time.</em></p>
</div>
<div
id="exploratory-analysis-visualizations-summaries-and-exploratory-statistical-analyses.-justify-the-steps-you-took-and-show-any-major-changes-to-your-ideas."
class="section level1">
<h1>Exploratory analysis: Visualizations, summaries, and exploratory
statistical analyses. Justify the steps you took, and show any major
changes to your ideas.</h1>
<div id="map-for-landing-page" class="section level2">
<h2>Map for landing page</h2>
<p><em>1. Interactive map on landing page is to provide an intuitive
visual representation of the geographic distribution of healthy stores,
retail stores, and farmer markets across NYC. The interactive map was
created using the leaflet package.</em></p>
<p><em>2. The map uses CartoDB.Positron tiles background with adjusted
transparency (opacity = 0.8) for clarity and aesthetic appeal. Each type
of food sources was given a unique color for easy differentiation. Each
marker displays detailed information (store name, borough, address, and
type) when clicked. Color-coded markers and detailed popups make it easy
to identify and explore the locations of different food sources. The use
of an interactive map ensures that stakeholders can explore the data in
an intuitive, spatial format.</em></p>
<p><em>3. The map allows users to observe clustering patterns and
disparities in access to food-related resources.</em></p>
</div>
<div
id="bar-graphs-to-show-the-number-of-healthy-storesfarmer-markets-in-each-borough"
class="section level2">
<h2>Bar graphs to show the number of healthy stores/farmer markets in
each borough</h2>
<p><em>1. To compare the number of healthy stores and farmer markets
across NYC boroughs. A grouped bar plot was used to summarize and
display the total number of food sources in each borough.</em></p>
<p><em>2. Data was grouped by borough and the counts were summed using
sum(count, na.rm = TRUE). X-axis: Boroughs were set as the independent
variable. Y-axis: Total counts of healthy stores and farmer markets.
Fill Color: Borough-specific colors were used for visual
differentiation.</em></p>
<p><em>3. A bar plot is intuitive for comparing discrete categories
(boroughs) and their respective totals.This plot highlights boroughs
with the highest and lowest access to healthy stores and farmer markets,
emphasizing disparities in resource distribution.</em></p>
</div>
<div
id="scatterplot-to-show-overweight-percentage-changes-by-year-in-each-borough"
class="section level2">
<h2>Scatterplot to show overweight percentage changes by year in each
borough</h2>
<p><em>1. A scatter plot with loess smoothing lines for each borough was
used to display trends. Excluded data for 2023 (filter(year != 2023))
due to incomplete or anomalous data for this year. X-axis: Treated year
as a continuous variable (as.numeric(year)) to show trends over time.
Displayed all years explicitly using scale_x_continuous() with unique
labels for readability. Y-axis: Represented overweight_percentage as the
dependent variable. Points and Smoothing Lines: Points: Represent
individual borough-year overweight percentages. Smoothing Lines: Added
loess (local regression) smoothing to highlight trends for each borough
without assuming linearity. Each borough was given a distinct color for
differentiation in the visualization.</em></p>
<p><em>2. Scatter plots with smoothing lines are effective for
visualizing trends over time, particularly when the relationships may
not be linear.</em></p>
</div>
</div>
<div
id="additional-analysis-if-you-undertake-formal-statistical-analyses-describe-these-in-detail"
class="section level1">
<h1>Additional analysis: If you undertake formal statistical analyses,
describe these in detail</h1>
<div
id="linear-plot-to-show-association-between-the-number-of-healthy-storesfarmer-markets-and-overweight-percentages"
class="section level2">
<h2>1.Linear plot to show association Between the Number of Healthy
Stores/Farmer Markets and Overweight Percentages</h2>
<p><em>It is to examine the relationship between the availability of
healthy stores and farmer markets and overweight percentages across NYC
boroughs.</em></p>
<p><em>A scatter plot with loess smoothing was used to explore the
association between count (number of healthy stores/farmer markets) and
overweight_percentage. X-axis: Represents the number of healthy stores
and farmer markets (count), which is the independent variable. Y-axis:
Represents the overweight percentage (overweight_percentage), which is
the dependent variable. Points represent borough-level data for the
number of stores and the corresponding overweight percentage. Smoothing
line added loess smoothing to visualize the trend without assuming a
specific functional form of the relationship.</em></p>
<p><em>Scatter plots are well-suited for exploring relationships between
two continuous variables. The addition of loess smoothing helps reveal
patterns or trends in the data without imposing a linear
relationship.</em></p>
</div>
<div
id="linear-regression-is-to-evaluate-the-association-between-the-number-of-healthy-storesfarmer-markets-count-and-overweight-percentages-overweight_percentage-using-a-simple-linear-regression-model."
class="section level2">
<h2>linear regression is to evaluate the association between the number
of healthy stores/farmer markets (count) and overweight percentages
(overweight_percentage) using a simple linear regression model.</h2>
<p><em>The linear model was specified as: overweight_percentage =𝛽0
+𝛽1×count +𝜖. Dependent Variable: overweight_percentage. Independent
Variable: count.</em></p>
<p><em>The summary(model) output was tidied using the broom::tidy()
function for a clean tabular format. The table was formatted using
knitr::kable() for presentation.</em></p>
<p><em>The tidy table of model coefficients provides estimate that is
the estimated effect of the independent variable on the dependent
variable. The coefficient for count indicates how much
overweight_percentage changes for each additional healthy store/farmer
market. p-value is to assess a statistically significant
association.</em></p>
<p><em>Simple and interpretable, making it suitable for evaluating the
relationship between two variables.</em></p>
</div>
<div id="residual-plot" class="section level2">
<h2>residual plot</h2>
<p><em>1. The Residuals vs. Fitted Values plot is used to evaluate the
assumptions of a linear.Linearity: The relationship between predictors
and the dependent variable should be linear. Homoscedasticity: The
residuals should have constant variance across fitted
values.Independence: Residuals should not show patterns or
correlations.No Outliers: Extreme values should not unduly influence the
model.</em></p>
<p><em>2.X-axis: The fitted values (fitted_values) represent the
predicted overweight percentages based on the regression model.Y-axis:
The residuals (residuals) are the differences between the observed
overweight percentages and the fitted values. A horizontal line at y = 0
(red, dashed) represents the ideal scenario where residuals are randomly
scattered around zero.</em></p>
<p><em>3. Interpretation of the Plot: If the residuals are randomly
scattered around the horizontal line (y = 0), it suggests that the
linearity assumption is met.</em></p>
</div>
</div>
<div id="discussion-findings-expect-insights-limitations"
class="section level1">
<h1>Discussion: (findings? expect? insights? limitations?)</h1>
<div id="distribution-of-healthy-storesfarmer-markets-across-boroughs"
class="section level2">
<h2>1. Distribution of Healthy Stores/Farmer Markets Across
Boroughs</h2>
<p><em>1. Brooklyn has the highest number of healthy stores and farmer
markets, followed by the Bronx and Manhattan.Queens and Staten Island
have significantly fewer healthy stores and farmer markets.</em></p>
<p><em>2. The result is what we expected. Larger boroughs with higher
population densities like Brooklyn and the Bronx are expected to have
more establishments. Staten Island’s lower density explains its fewer
establishments.</em></p>
<p><em>3. Disparity in the availability of healthy food resources is
evident. Policy efforts should target underserved boroughs (e.g., Staten
Island and Queens) to improve access to healthy food options.</em></p>
</div>
<div id="overweight-percentage-changes-by-year-in-each-borough"
class="section level2">
<h2>2. Overweight Percentage Changes by Year in Each Borough</h2>
<p><em>1. The Bronx and Staten Island have the highest overweight
percentages, peaking around 70%. Manhattan consistently shows the lowest
overweight percentages. Overweight percentages have generally declined
since 2017–2018.</em></p>
<p><em>2. The result is what we expected. Disparities align with
socioeconomic and geographic differences. Affluent areas like Manhattan
are more likely to support healthier lifestyles, while areas like the
Bronx face systemic challenges.</em></p>
<p><em>3.Declining overweight percentages may reflect the impact of
health initiatives. Borough-specific interventions are necessary to
address persistently high rates in the Bronx and Staten Island.</em></p>
</div>
<div
id="association-between-number-of-healthy-storesfarmer-markets-and-overweight-percentages"
class="section level2">
<h2>3. Association Between Number of Healthy Stores/Farmer Markets and
Overweight Percentages</h2>
<ol style="list-style-type: decimal">
<li><p>Scatter plot with LOESS smoothing shows a weak, linear
relationship between the variables. Regression analysis indicates a
small negative but statistically insignificant association (estimate =
-0.0499, p-value = 0.475).</p></li>
<li><p>Partially, it is what we expected. While access to healthy stores
is hypothesized to reduce overweight percentages, the weak association
suggests other factors play a larger role.</p></li>
<li><p>Obesity-related issues are complex and influenced by multiple
factors beyond access to healthy stores, such as socioeconomic status,
education, and access to exercise facilities. Increasing the number of
healthy stores alone may not suffice; broader interventions are
needed.</p></li>
</ol>
</div>
<div id="residuals-vs.-fitted-values-plot" class="section level2">
<h2>4. Residuals vs. Fitted Values Plot</h2>
<ol style="list-style-type: decimal">
<li><p>Residuals are randomly scattered around the horizontal line (y =
0), with no clear patterns or clustering. Residual spread remains fairly
constant, indicating homoscedasticity.</p></li>
<li><p>It is what we expected: the plot supports assumptions of linear
regression.</p></li>
<li><p>The model is valid for the data despite the weak association
between variables, limiting its predictive power.</p></li>
</ol>
</div>
<div id="the-map-of-food-sources-landing-page" class="section level2">
<h2>5. The map of food sources (landing page)</h2>
<p><em>1.The interactive map displays the geographic distribution of
food-related establishments in New York City. Blue markers (Healthy
Stores), green markers (Retail Stores) and red markers (Farmer Markets)
reveal noticeable clusters and disparities in availability across
boroughs. There is a higher density of markers in areas such as
Manhattan and parts of Brooklyn, while Staten Island and Queens exhibit
lower densities.</em></p>
<p><em>2. The clustering of resources in Manhattan and Brooklyn aligns
with expectations due to their higher population density and more
developed infrastructure. Lower marker density in Staten Island is
consistent with its smaller population and suburban characteristics.
Disparities in the distribution of resources, especially in boroughs
like Queens and Staten Island, reflect known patterns of inequitable
access to healthy food resources.</em></p>
<p><em>3. Areas with higher marker density represent better access to
healthy food resources, whereas sparsely marked regions indicate
underserved areas. The data reinforces the need for targeted
interventions to improve access in resource-scarce neighborhoods,
particularly in parts of Queens and Staten Island. The map provides
stakeholders with a visual understanding of where to focus efforts for
improving food equity across NYC.</em></p>
</div>
<div id="walkability-to-food-sources-from-subway-stations"
class="section level2">
<h2>6. Walkability to Food Sources from Subway Stations</h2>
<p><em>1. The map illustrates food source accessibility within a
400-meter walking radius of subway stations along the Astoria line. Food
sources (green markers) are generally clustered around subway stations,
suggesting that many establishments are accessible to public transit
users. Some stations have sparse or no food sources within their walking
radius, highlighting potential gaps in accessibility.</em></p>
<p><em>It is expected that areas around subway stations would have a
higher density of food sources due to increased foot traffic and urban
planning focused on convenience. However, the absence of food sources
near some stations, despite their connectivity, was less expected and
may point to localized factors such as zoning regulations or lower
population density.</em></p>
<p><em>3. Well-Served Areas: Stations with dense clusters of food
sources offer a variety of options to residents and commuters.
Underserved Areas: Gaps in accessibility around certain stations could
highlight neighborhoods where improving access to food sources is
critical.Policy Implications: Data can inform urban planning efforts,
such as encouraging healthy food establishments near underserved
stations.</em></p>
</div>
</div>
<div id="limitations" class="section level1">
<h1>Limitations</h1>
<p><em>1.Complex Influences: Obesity is multifactorial; future analyses
should include variables like income, education, and physical activity
access.</em></p>
<p><em>2.Data Gaps: Missing or incomplete data (e.g., 2023) limits
temporal analysis.</em></p>
<p><em>3.Linear Models: Consider advanced modeling to capture complex
relationships.</em></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
